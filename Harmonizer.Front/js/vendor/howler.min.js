(function(){var f={},n=null,r=!0,e=!1,u,s,t,h,i,o;try{typeof AudioContext!="undefined"?n=new AudioContext:typeof webkitAudioContext!="undefined"?n=new webkitAudioContext:r=!1}catch(y){r=!1}if(!r)if(typeof Audio!="undefined")try{new Audio}catch(y){e=!0}else e=!0;if(r&&(u=typeof n.createGain=="undefined"?n.createGainNode():n.createGain(),u.gain.value=1,u.connect(n.destination)),s=function(t){this._volume=1;this._muted=!1;this.usingWebAudio=r;this.ctx=n;this.noAudio=e;this._howls=[];this._codecs=t;this.iOSAutoEnable=!0},s.prototype={volume:function(n){var t=this,i,f;if(n=parseFloat(n),n>=0&&n<=1){t._volume=n;r&&(u.gain.value=n);for(i in t._howls)if(t._howls.hasOwnProperty(i)&&t._howls[i]._webAudio===!1)for(f=0;f<t._howls[i]._audioNode.length;f++)t._howls[i]._audioNode[f].volume=t._howls[i]._volume*t._volume;return t}return r?u.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(n){var t=this,i,f;t._muted=n;r&&(u.gain.value=n?0:t._volume);for(i in t._howls)if(t._howls.hasOwnProperty(i)&&t._howls[i]._webAudio===!1)for(f=0;f<t._howls[i]._audioNode.length;f++)t._howls[i]._audioNode[f].muted=n},codecs:function(n){return this._codecs[n]},_enableiOSAudio:function(){var t=this,i;if(!n||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent))return t._iOSEnabled=!1,i=function(){var u=n.createBuffer(1,1,22050),r=n.createBufferSource();r.buffer=u;r.connect(n.destination);typeof r.start=="undefined"?r.noteOn(0):r.start(0);setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",i,!1))},0)},window.addEventListener("touchstart",i,!1),t}},t=null,h={},e||(t=new Audio,h={mp3:!!t.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}),i=new s(h),o=function(t){var u=this;u._autoplay=t.autoplay||!1;u._buffer=t.buffer||!1;u._duration=t.duration||0;u._format=t.format||null;u._loop=t.loop||!1;u._loaded=!1;u._sprite=t.sprite||{};u._src=t.src||"";u._pos3d=t.pos3d||[0,0,-.5];u._volume=t.volume!==undefined?t.volume:1;u._urls=t.urls||[];u._rate=t.rate||1;u._model=t.model||null;u._onload=[t.onload||function(){}];u._onloaderror=[t.onloaderror||function(){}];u._onend=[t.onend||function(){}];u._onpause=[t.onpause||function(){}];u._onplay=[t.onplay||function(){}];u._onendTimer=[];u._webAudio=r&&!u._buffer;u._audioNode=[];u._webAudio&&u._setupAudioNode();typeof n!="undefined"&&n&&i.iOSAutoEnable&&i._enableiOSAudio();i._howls.push(u);u.load()},o.prototype={load:function(){var n=this,u=null,f,r,o,t,c;if(e){n.on("loaderror");return}for(f=0;f<n._urls.length;f++){if(n._format)r=n._format;else if(o=n._urls[f],r=/^data:audio\/([^;,]+);/i.exec(o),r||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r)r=r[1].toLowerCase();else{n.on("loaderror");return}if(h[r]){u=n._urls[f];break}}if(!u){n.on("loaderror");return}return n._src=u,n._webAudio?a(n,u):(t=new Audio,t.addEventListener("error",function(){t.error&&t.error.code===4&&(s.noAudio=!0);n.on("loaderror",{type:t.error?t.error.code:0})},!1),n._audioNode.push(t),t.src=u,t._pos=0,t.preload="auto",t.volume=i._muted?0:n._volume*i.volume(),c=function(){if(n._duration=Math.ceil(t.duration*10)/10,Object.getOwnPropertyNames(n._sprite).length===0&&(n._sprite={_default:[0,n._duration*1e3]}),!n._loaded){n._loaded=!0;n.on("load")}n._autoplay&&n.play();t.removeEventListener("canplaythrough",c,!1)},t.addEventListener("canplaythrough",c,!1),t.load()),n},urls:function(n){var t=this;return n?(t.stop(),t._urls=typeof n=="string"?[n]:n,t._loaded=!1,t.load(),t):t._urls},play:function(t,r){var u=this;if(typeof t=="function"&&(r=t),t&&typeof t!="function"||(t="_default"),!u._loaded){u.on("load",function(){u.play(t,r)});return u}return u._sprite[t]?(u._inactiveNode(function(f){var o,s,h,e,c,l,a;if(f._sprite=t,o=f._pos>0?f._pos:u._sprite[t][0]/1e3,s=0,u._webAudio?(s=u._sprite[t][1]/1e3-f._pos,f._pos>0&&(o=u._sprite[t][0]/1e3+o)):s=u._sprite[t][1]/1e3-(o-u._sprite[t][0]/1e3),h=!!(u._loop||u._sprite[t][2]),e=typeof r=="string"?r:Math.round(Date.now()*Math.random())+"",function(){var n={id:e,sprite:t,loop:h};c=setTimeout(function(){!u._webAudio&&h&&u.stop(n.id).play(t,n.id);u._webAudio&&!h&&(u._nodeById(n.id).paused=!0,u._nodeById(n.id)._pos=0,u._clearEndTimer(n.id));u._webAudio||h||u.stop(n.id);u.on("end",e)},s*1e3);u._onendTimer.push({timer:c,id:n.id})}(),u._webAudio)l=u._sprite[t][0]/1e3,a=u._sprite[t][1]/1e3,f.id=e,f.paused=!1,v(u,[h,l,a],e),u._playStart=n.currentTime,f.gain.value=u._volume,typeof f.bufferSource.start=="undefined"?f.bufferSource.noteGrainOn(0,o,s):f.bufferSource.start(0,o,s);else if(f.readyState===4||!f.readyState&&navigator.isCocoonJS)f.readyState=4,f.id=e,f.currentTime=o,f.muted=i._muted||f.muted,f.volume=u._volume*i.volume(),setTimeout(function(){f.play()},0);else return u._clearEndTimer(e),function(){var e=u,o=t,s=r,n=f,i=function(){e.play(o,s);n.removeEventListener("canplaythrough",i,!1)};n.addEventListener("canplaythrough",i,!1)}(),u;u.on("play");return typeof r=="function"&&r(e),u}),u):(typeof r=="function"&&r(),u)},pause:function(n){var t=this,i;if(!t._loaded){t.on("play",function(){t.pause(n)});return t}if(t._clearEndTimer(n),i=n?t._nodeById(n):t._activeNode(),i)if(i._pos=t.pos(null,n),t._webAudio){if(!i.bufferSource||i.paused)return t;i.paused=!0;typeof i.bufferSource.stop=="undefined"?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();t.on("pause");return t},stop:function(n){var i=this,t;if(!i._loaded){i.on("play",function(){i.stop(n)});return i}if(i._clearEndTimer(n),t=n?i._nodeById(n):i._activeNode(),t)if(t._pos=0,i._webAudio){if(!t.bufferSource||t.paused)return i;t.paused=!0;typeof t.bufferSource.stop=="undefined"?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else isNaN(t.duration)||(t.pause(),t.currentTime=0);return i},mute:function(n){var t=this,i;if(!t._loaded){t.on("play",function(){t.mute(n)});return t}return i=n?t._nodeById(n):t._activeNode(),i&&(t._webAudio?i.gain.value=0:i.muted=!0),t},unmute:function(n){var t=this,i;if(!t._loaded){t.on("play",function(){t.unmute(n)});return t}return i=n?t._nodeById(n):t._activeNode(),i&&(t._webAudio?i.gain.value=t._volume:i.muted=!1),t},volume:function(n,t){var r=this,u;if(n=parseFloat(n),n>=0&&n<=1){if(r._volume=n,!r._loaded){r.on("play",function(){r.volume(n,t)});return r}return u=t?r._nodeById(t):r._activeNode(),u&&(r._webAudio?u.gain.value=n:u.volume=n*i.volume()),r}return r._volume},loop:function(n){var t=this;return typeof n=="boolean"?(t._loop=n,t):t._loop},sprite:function(n){var t=this;return typeof n=="object"?(t._sprite=n,t):t._sprite},pos:function(t,i){var r=this,f,u;if(!r._loaded){r.on("load",function(){r.pos(t)});return typeof t=="number"?r:r._pos||0}if(t=parseFloat(t),f=i?r._nodeById(i):r._activeNode(),f)return t>=0?(r.pause(i),f._pos=t,r.play(f._sprite,i),r):r._webAudio?f._pos+(n.currentTime-r._playStart):f.currentTime;if(t>=0)return r;for(u=0;u<r._audioNode.length;u++)if(r._audioNode[u].paused&&r._audioNode[u].readyState===4)return r._webAudio?r._audioNode[u]._pos:r._audioNode[u].currentTime},pos3d:function(n,t,i,r){var u=this,f;if(t=typeof t=="undefined"||!t?0:t,i=typeof i=="undefined"||!i?-.5:i,!u._loaded){u.on("play",function(){u.pos3d(n,t,i,r)});return u}if(n>=0||n<0)u._webAudio&&(f=r?u._nodeById(r):u._activeNode(),f&&(u._pos3d=[n,t,i],f.panner.setPosition(n,t,i),f.panner.panningModel=u._model||"HRTF"));else return u._pos3d;return u},fade:function(n,t,i,r,u){var f=this,s=Math.abs(n-t),h=n>t?"down":"up",o=s/.01,c=i/o,e;if(!f._loaded){f.on("load",function(){f.fade(n,t,i,r,u)});return f}for(f.volume(n,u),e=1;e<=o;e++)(function(){var i=f._volume+(h==="up"?.01:-.01)*e,n=Math.round(1e3*i)/1e3,o=t;setTimeout(function(){f.volume(n,u);n===o&&r&&r()},c*e)})()},fadeIn:function(n,t,i){return this.volume(0).play().fade(0,n,t,i)},fadeOut:function(n,t,i,r){var u=this;return u.fade(u._volume,n,t,function(){i&&i();u.pause(r);u.on("end")},r)},_nodeById:function(n){for(var t=this,r=t._audioNode[0],i=0;i<t._audioNode.length;i++)if(t._audioNode[i].id===n){r=t._audioNode[i];break}return r},_activeNode:function(){for(var n=this,i=null,t=0;t<n._audioNode.length;t++)if(!n._audioNode[t].paused){i=n._audioNode[t];break}return n._drainPool(),i},_inactiveNode:function(n){for(var i,u,f,t=this,e=null,r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&t._audioNode[r].readyState===4){n(t._audioNode[r]);e=!0;break}(t._drainPool(),e)||(t._webAudio?(i=t._setupAudioNode(),n(i)):(t.load(),i=t._audioNode[t._audioNode.length-1],u=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",f=function(){i.removeEventListener(u,f,!1);n(i)},i.addEventListener(u,f,!1)))},_drainPool:function(){for(var t=this,i=0,n=0;n<t._audioNode.length;n++)t._audioNode[n].paused&&i++;for(n=t._audioNode.length-1;n>=0;n--){if(i<=5)break;t._audioNode[n].paused&&(t._webAudio&&t._audioNode[n].disconnect(0),i--,t._audioNode.splice(n,1))}},_clearEndTimer:function(n){for(var u,t=this,r=0,i=0;i<t._onendTimer.length;i++)if(t._onendTimer[i].id===n){r=i;break}u=t._onendTimer[r];u&&(clearTimeout(u.timer),t._onendTimer.splice(r,1))},_setupAudioNode:function(){var r=this,t=r._audioNode,i=r._audioNode.length;return t[i]=typeof n.createGain=="undefined"?n.createGainNode():n.createGain(),t[i].gain.value=r._volume,t[i].paused=!0,t[i]._pos=0,t[i].readyState=4,t[i].connect(u),t[i].panner=n.createPanner(),t[i].panner.panningModel=r._model||"equalpower",t[i].panner.setPosition(r._pos3d[0],r._pos3d[1],r._pos3d[2]),t[i].panner.connect(t[i]),t[i]},on:function(n,t){var r=this,u=r["_on"+n],i;if(typeof t=="function")u.push(t);else for(i=0;i<u.length;i++)t?u[i].call(r,t):u[i].call(r);return r},off:function(n,t){var r=this,u=r["_on"+n],f=t?t.toString():null,i;if(f){for(i=0;i<u.length;i++)if(f===u[i].toString()){u.splice(i,1);break}}else r["_on"+n]=[];return r},unload:function(){for(var u,t=this,r=t._audioNode,n=0;n<t._audioNode.length;n++){if(!r[n].paused){t.stop(r[n].id);t.on("end",r[n].id)}t._webAudio?r[n].disconnect(0):r[n].src=""}for(n=0;n<t._onendTimer.length;n++)clearTimeout(t._onendTimer[n].timer);u=i._howls.indexOf(t);u!==null&&u>=0&&i._howls.splice(u,1);delete f[t._src];t=null}},r)var a=function(n,t){var u,e,r,i;if(t in f){n._duration=f[t].duration;l(n);return}if(/^data:[^;]+;base64,/.test(t)){for(u=atob(t.split(",")[1]),e=new Uint8Array(u.length),r=0;r<u.length;++r)e[r]=u.charCodeAt(r);c(e.buffer,n,t)}else{i=new XMLHttpRequest;i.open("GET",t,!0);i.responseType="arraybuffer";i.onload=function(){c(i.response,n,t)};i.onerror=function(){n._webAudio&&(n._buffer=!0,n._webAudio=!1,n._audioNode=[],delete n._gainNode,delete f[t],n.load())};try{i.send()}catch(o){i.onerror()}}},c=function(t,i,r){n.decodeAudioData(t,function(n){n&&(f[r]=n,l(i,n))},function(){i.on("loaderror")})},l=function(n,t){if(n._duration=t?t.duration:n._duration,Object.getOwnPropertyNames(n._sprite).length===0&&(n._sprite={_default:[0,n._duration*1e3]}),!n._loaded){n._loaded=!0;n.on("load")}n._autoplay&&n.play()},v=function(t,i,r){var u=t._nodeById(r);u.bufferSource=n.createBufferSource();u.bufferSource.buffer=f[t._src];u.bufferSource.connect(u.panner);u.bufferSource.loop=i[0];i[0]&&(u.bufferSource.loopStart=i[1],u.bufferSource.loopEnd=i[1]+i[2]);u.bufferSource.playbackRate.value=t._rate};typeof define=="function"&&define.amd&&define(function(){return{Howler:i,Howl:o}});typeof exports!="undefined"&&(exports.Howler=i,exports.Howl=o);typeof window!="undefined"&&(window.Howler=i,window.Howl=o)})();
/*
//# sourceMappingURL=howler.min.js.map
*/